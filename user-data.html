<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GainX REG-PANEL</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-color: #1e1f22;
      --container-bg-color: #2a2c30;
      --input-bg-color: #242528;
      --text-color: #d1d5db;
      --text-muted-color: #9ca3af;
      --label-color: #adb5bd;
      --border-color: #4b5563;
      --accent-color: #3b82f6;
      --accent-hover-color: #2563eb;
      --danger-color: #ef4444;
      --danger-muted-color: #f87171;
      --focus-ring-color: rgba(59, 130, 246, 0.4);
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 24px;
      box-sizing: border-box;
      line-height: 1.6;
    }

    .form-wrapper {
      background-color: var(--container-bg-color);
      padding: 32px 48px;
      width: 100%;
      max-width: 750px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35), 0 1px 3px rgba(0,0,0,0.1);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .form-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .logo-container img {
      max-width: 150px;
      max-height: 70px;
      margin-bottom: 15px;
      object-fit: contain;
    }

    .form-header h1 {
      color: #ffffff;
      font-size: 2.2em;
      font-weight: 700;
      margin: 0 0 8px 0;
      letter-spacing: 0.5px;
    }

    .form-header p#current-datetime-ist {
      font-size: 0.9em;
      color: var(--text-muted-color);
      margin: 0;
      min-height: 1.2em;
    }

    .ip-display-container {
      text-align: center;
      margin-bottom: 32px;
      padding: 10px;
      background-color: rgba(0,0,0,0.1);
      border-radius: 6px;
      font-size: 0.9em;
      color: var(--text-muted-color);
    }

    .ip-display-container strong {
      color: var(--text-color);
    }

    .ip-display-container span#user-ip {
      color: var(--danger-color);
      font-weight: 600;
    }

    .ip-display-container .blinking {
      animation: blinker 1.5s linear infinite;
      color: var(--danger-color); /* Blinking red */
    }

    @keyframes blinker {
      50% {
        opacity: 0;
      }
    }

    label {
      display: block;
      width: 100%;
      margin: 20px 0 8px 0;
      color: var(--label-color);
      font-size: 0.9em;
      font-weight: 500;
    }

    input[type="text"],
    input[type="date"],
    input[type="tel"],
    input[type="email"],
    select {
      background-color: var(--input-bg-color);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      font-family: inherit;
      font-size: 1em;
      padding: 14px 16px;
      width: 100%;
      box-sizing: border-box;
      border-radius: 8px;
      transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    select {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ADB5BD%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.4-5.4-13z%22%2F%3E%3C%2Fsvg%3E');
      background-repeat: no-repeat;
      background-position: right 16px center;
      background-size: 12px;
      padding-right: 40px;
    }

    select:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .phone-input-group {
      display: flex;
      gap: 8px;
    }

    .phone-input-group select#country_code {
      width: auto;
      min-width: 120px;
      flex-grow: 0;
    }

    .phone-input-group input#phone {
      flex-grow: 1;
    }

    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active,
    select:-webkit-autofill,
    select:-webkit-autofill:hover,
    select:-webkit-autofill:focus,
    select:-webkit-autofill:active {
      -webkit-box-shadow: 0 0 0 40px var(--input-bg-color) inset !important;
      -webkit-text-fill-color: var(--text-color) !important;
      caret-color: var(--accent-color);
      border: 1px solid var(--accent-color);
    }

    input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(60%) sepia(10%) saturate(500%) hue-rotate(180deg) brightness(1.1);
    }

    input:focus,
    select:focus {
      outline: none;
      border-color: var(--accent-color);
      box-shadow: 0 0 0 3px var(--focus-ring-color);
    }

    button[type="button"] {
      background-color: var(--accent-color);
      color: #ffffff;
      border: none;
      padding: 14px 24px;
      margin-top: 32px;
      cursor: pointer;
      font-size: 1em;
      font-weight: 600;
      border-radius: 8px;
      transition: background-color 0.15s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.15s ease-in-out;
      width: 100%;
      display: block;
    }

    button[type="button"]:hover {
      background-color: var(--accent-hover-color);
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }

    button[type="button"]:focus {
      background-color: var(--accent-hover-color);
      outline: none;
      box-shadow: 0 0 0 3.5px var(--bg-color), 0 0 0 6.5px var(--accent-color);
    }

    button[type="button"]:active {
      transform: translateY(1px);
      background-color: #1d4ed8;
    }

    button[type="button"]:disabled {
      background-color: var(--text-muted-color);
      cursor: not-allowed;
      box-shadow: none;
    }
  </style>
</head>
<body>
  <div class="form-wrapper">
    <div class="form-header">
      <div class="logo-container">
        <img src="logo.png" alt="GainX Logo">
      </div>
      <h1>GainX <span style="color: var(--accent-color);">REG-PANEL</span></h1>
      <p id="current-datetime-ist">Loading date and time...</p>
    </div>
    <div class="ip-display-container">
      <strong>Your IP Address:</strong> <span id="user-ip">Detecting...</span><span class="blinking">‚óè</span>
    </div>
    <form id="registrationForm" action="save-user.php" method="POST">
      <label for="full_name">Full Name</label>
      <input type="text" id="full_name" name="full_name" required placeholder="e.g., Alex Johnson">

      <label for="national_id">National ID</label>
      <input type="text" id="national_id" name="national_id" required placeholder="e.g., NID123456789">

      <label for="dob">Date of Birth</label>
      <input type="date" id="dob" name="dob" required>

      <label for="sex">Sex</label>
      <select id="sex" name="sex" required>
        <option value="" disabled selected>Select your sex...</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Non-binary">Non-binary</option>
        <option value="Other">Other</option>
        <option value="Prefer not to say">Prefer not to say</option>
      </select>

      <label for="address">Residential Address</label>
      <input type="text" id="address" name="address" required placeholder="e.g., 456 Oak Avenue, Metropolis">

      <label for="phone">Phone Number</label>
      <div class="phone-input-group">
        <select id="country_code" name="country_code" required>
          <option value="+91" selected>IN (+91)</option>
          <option value="+1">US (+1)</option>
          <option value="+44">UK (+44)</option>
          <option value="+61">AU (+61)</option>
          <option value="+81">JP (+81)</option>
          <option value="+49">DE (+49)</option>
        </select>
        <input type="tel" id="phone" name="phone" required placeholder="e.g., 9876543210">
      </div>

      <label for="email">Email Address</label>
      <input type="email" id="email" name="email" required placeholder="e.g., alex.johnson@email.com">

      <label for="occupation">Current Occupation</label>
      <select id="occupation" name="occupation" required>
        <option value="" disabled selected>Select your occupation...</option>
        <optgroup label="Technology & Engineering">
          <option value="Software Developer">Software Developer</option>
          <option value="Data Scientist">Data Scientist</option>
          <option value="Systems Analyst">Systems Analyst</option>
          <option value="Network Engineer">Network Engineer</option>
          <option value="DevOps Engineer">DevOps Engineer</option>
          <option value="Cybersecurity Analyst">Cybersecurity Analyst</option>
          <option value="UI/UX Designer">UI/UX Designer</option>
          <option value="Project Manager (IT)">Project Manager (IT)</option>
          <option value="QA Engineer">QA Engineer</option>
          <option value="Cloud Architect">Cloud Architect</option>
          <option value="Mechanical Engineer">Mechanical Engineer</option>
          <option value="Electrical Engineer">Electrical Engineer</option>
          <option value="Civil Engineer">Civil Engineer</option>
        </optgroup>
        <optgroup label="Healthcare">
          <option value="Doctor">Doctor</option>
          <option value="Nurse">Nurse</option>
          <option value="Pharmacist">Pharmacist</option>
          <option value="Medical Researcher">Medical Researcher</option>
          <option value="Therapist">Therapist</option>
        </optgroup>
        <optgroup label="Business & Finance">
          <option value="Accountant">Accountant</option>
          <option value="Financial Analyst">Financial Analyst</option>
          <option value="Marketing Specialist">Marketing Specialist</option>
          <option value="Sales Manager">Sales Manager</option>
          <option value="Human Resources Manager">Human Resources Manager</option>
          <option value="Business Consultant">Business Consultant</option>
          <option value="Operations Manager">Operations Manager</option>
        </optgroup>
        <optgroup label="Education">
          <option value="Teacher">Teacher</option>
          <option value="Professor">Professor</option>
          <option value="Librarian">Librarian</option>
          <option value="Educational Administrator">Educational Administrator</option>
        </optgroup>
        <optgroup label="Creative Arts & Media">
          <option value="Graphic Designer">Graphic Designer</option>
          <option value="Writer/Editor">Writer/Editor</option>
          <option value="Journalist">Journalist</option>
          <option value="Photographer/Videographer">Photographer/Videographer</option>
          <option value="Musician">Musician</option>
        </optgroup>
        <optgroup label="Trades & Services">
          <option value="Electrician">Electrician</option>
          <option value="Plumber">Plumber</option>
          <option value="Chef">Chef</option>
          <option value="Customer Service Representative">Customer Service Representative</option>
        </optgroup>
        <option value="Student">Student</option>
        <option value="Unemployed">Unemployed</option>
        <option value="Retired">Retired</option>
        <option value="Other">Other</option>
      </select>

      <button type="button" onclick="openLegalPage()" disabled>Register Details</button>
    </form>
  </div>

  <script>
    function displayCurrentTimeIST() {
      const now = new Date();
      const options = {
        timeZone: 'Asia/Kolkata',
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: true
      };
      const formatter = new Intl.DateTimeFormat('en-IN', options);
      const formattedTimeIST = formatter.format(now);
      const timeElement = document.getElementById('current-datetime-ist');
      if (timeElement) {
        timeElement.textContent = `Current Time (IST): ${formattedTimeIST}`;
      }
    }

    async function fetchUserIP() {
      const ipElement = document.getElementById('user-ip');
      if (!ipElement) return;
      try {
        const response = await fetch('https://api.ipify.org?format=json');
        if (!response.ok) {
          let errorMessage = 'Unknown error fetching IP';
          try {
            const errorData = await response.json();
            errorMessage = errorData.reason || errorData.message || errorMessage;
          } catch (e) { /* Ignore */ }
          throw new Error(`HTTP error! status: ${response.status}, Message: ${errorMessage}`);
        }
        const data = await response.json();
        ipElement.textContent = data.ip;
      } catch (error) {
        console.error("Could not fetch IP address:", error);
        ipElement.textContent = "Unavailable";
        ipElement.style.color = "var(--danger-muted-color)";
      }
    }

    function openLegalPage() {
      const popupWidth = 800;
      const popupHeight = 600;
      const left = (screen.width / 2) - (popupWidth / 2);
      const top = (screen.height / 2) - (popupHeight / 2);
      const popupFeatures = `width=${popupWidth},height=${popupHeight},top=${top},left=${left},resizable=yes,scrollbars=yes,status=yes`;
      window.open('legal.html', 'LegalInformation', popupFeatures);
    }

    function validateForm() {
      const form = document.getElementById('registrationForm');
      const inputs = form.querySelectorAll('input[required], select[required]');
      let allFilled = true;

      inputs.forEach(input => {
        if (!input.value.trim()) {
          allFilled = false;
        }
      });

      const registerButton = document.querySelector('button[type="button"]');
      registerButton.disabled = !allFilled;
    }

    window.onload = function() {
      displayCurrentTimeIST();
      fetchUserIP();
      setInterval(displayCurrentTimeIST, 1000);

      // Initial validation and set up event listeners for input changes
      validateForm();
      const form = document.getElementById('registrationForm');
      form.addEventListener('input', validateForm);
    };
  </script>
</body>
</html>
